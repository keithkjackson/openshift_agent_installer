---
# Compact cluster with dedicated worker nodes
ocp_version: "4.14.3"
cluster_name: "ocp-prod"
base_domain: "example.com"

# Platform configuration
platform_type: "baremetal"
provisioning_network: "Disabled"

# VIP addresses
api_vip: "192.168.1.5"
ingress_vip: "192.168.1.6"

# Cluster configuration
control_plane_replicas: 3
compute_replicas: 2

# Network configuration
machine_network_cidr: "192.168.1.0/24"
cluster_network_cidr: "10.128.0.0/14"
cluster_network_host_prefix: 23
service_network: "172.30.0.0/16"

# Rendezvous IP (first master node)
rendezvous_ip: "192.168.1.100"

# Pull secret and SSH key
pull_secret: "{{ lookup('file', 'pull-secret.json') }}"
ssh_public_key: "{{ lookup('file', '~/.ssh/id_rsa.pub') }}"

# ISO configuration
iso_http_url: "http://192.168.1.50:8080/agent.x86_64.iso"

# iDRAC configuration
idrac_username: "root"
idrac_password: "{{ vault_idrac_password }}"

idrac_servers:
  - name: "master-0"
    idrac_ip: "192.168.1.10"
    role: "master"
  - name: "master-1"
    idrac_ip: "192.168.1.11"
    role: "master"
  - name: "master-2"
    idrac_ip: "192.168.1.12"
    role: "master"
  - name: "worker-0"
    idrac_ip: "192.168.1.20"
    role: "worker"
  - name: "worker-1"
    idrac_ip: "192.168.1.21"
    role: "worker"

# Agent host configurations (3 masters + 2 workers)
agent_hosts:
  # Master nodes
  - hostname: "master-0"
    role: "master"
    rootDeviceHints:
      deviceName: "/dev/sda"
    interfaces:
      - name: "eno1"
        macAddress: "AA:BB:CC:DD:EE:01"
    networkConfig:
      interfaces:
        - name: "eno1"
          type: "ethernet"
          state: "up"
          ipv4:
            enabled: true
            address:
              - ip: "192.168.1.100"
                prefix-length: 24
            dhcp: false
      dns-resolver:
        config:
          server:
            - "192.168.1.1"
      routes:
        config:
          - destination: "0.0.0.0/0"
            next-hop-address: "192.168.1.1"
            next-hop-interface: "eno1"
  
  - hostname: "master-1"
    role: "master"
    rootDeviceHints:
      deviceName: "/dev/sda"
    interfaces:
      - name: "eno1"
        macAddress: "AA:BB:CC:DD:EE:02"
    networkConfig:
      interfaces:
        - name: "eno1"
          type: "ethernet"
          state: "up"
          ipv4:
            enabled: true
            address:
              - ip: "192.168.1.101"
                prefix-length: 24
            dhcp: false
      dns-resolver:
        config:
          server:
            - "192.168.1.1"
      routes:
        config:
          - destination: "0.0.0.0/0"
            next-hop-address: "192.168.1.1"
            next-hop-interface: "eno1"
  
  - hostname: "master-2"
    role: "master"
    rootDeviceHints:
      deviceName: "/dev/sda"
    interfaces:
      - name: "eno1"
        macAddress: "AA:BB:CC:DD:EE:03"
    networkConfig:
      interfaces:
        - name: "eno1"
          type: "ethernet"
          state: "up"
          ipv4:
            enabled: true
            address:
              - ip: "192.168.1.102"
                prefix-length: 24
            dhcp: false
      dns-resolver:
        config:
          server:
            - "192.168.1.1"
      routes:
        config:
          - destination: "0.0.0.0/0"
            next-hop-address: "192.168.1.1"
            next-hop-interface: "eno1"
  
  # Worker nodes
  - hostname: "worker-0"
    role: "worker"
    rootDeviceHints:
      deviceName: "/dev/sda"
    interfaces:
      - name: "eno1"
        macAddress: "BB:BB:CC:DD:EE:01"
    networkConfig:
      interfaces:
        - name: "eno1"
          type: "ethernet"
          state: "up"
          ipv4:
            enabled: true
            address:
              - ip: "192.168.1.110"
                prefix-length: 24
            dhcp: false
      dns-resolver:
        config:
          server:
            - "192.168.1.1"
      routes:
        config:
          - destination: "0.0.0.0/0"
            next-hop-address: "192.168.1.1"
            next-hop-interface: "eno1"
  
  - hostname: "worker-1"
    role: "worker"
    rootDeviceHints:
      deviceName: "/dev/sda"
    interfaces:
      - name: "eno1"
        macAddress: "BB:BB:CC:DD:EE:02"
    networkConfig:
      interfaces:
        - name: "eno1"
          type: "ethernet"
          state: "up"
          ipv4:
            enabled: true
            address:
              - ip: "192.168.1.111"
                prefix-length: 24
            dhcp: false
      dns-resolver:
        config:
          server:
            - "192.168.1.1"
      routes:
        config:
          - destination: "0.0.0.0/0"
            next-hop-address: "192.168.1.1"
            next-hop-interface: "eno1"
